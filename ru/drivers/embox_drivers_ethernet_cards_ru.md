
### Ethernet карты
Интерфейс драйвера ethernet карт максимально приближен к аналогичному из Linux. Для добавления драйвера необходимо зарегистрировать сетевое устройство с помощью функции inetdev_register_dev(). В качестве аргумента данная функция принимает указатель на структуру 'struct net_device'. Для ethernet устройств структура может быть созданна с помощью фунции etherdev_alloc(). В качестве аргумента она принимает только размер приватных данных для драйвера. Если данный аргумент ноль, то необходимо самостоятельно заполнить поле void *priv структуры net_device. Остальные шаги по инициализации являются специфичными для драйвера и необходимы если требуется настроить аппаратуру. Например можно установить прерывание с помощью функции irq_attach(). Перед регистрацией сетевого устройства необходимо устновить указатель на структуру для обработчиков операций устройства хранящихся в структуре 'struct net_driver'. Структура описывается следующим образом
```
struct net_driver {
	int (*start)(struct net_device *dev);
	int (*stop)(struct net_device *dev);
	int (*xmit)(struct net_device *dev, struct sk_buff *skb);
	int (*set_macaddr)(struct net_device *dev, const void *addr);
	int (*mdio_read)(struct net_device *dev, uint8_t reg);
	int (*mdio_write)(struct net_device *dev, uint8_t reg, uint16_t data);
	void (*set_phyid)(struct net_device *dev, uint8_t phyid);
	int (*set_speed)(struct net_device *dev, int speed);
};
```
Функиция start вызывается при поднятии (активации) интерфейса с помощью ifconfig или других средств управления интерфейсами. Функиция stop соответвенно при деактивации интерфейса. Функция xmit вызывается при отправки пакета из системы. Для регистрации обработчиков необходимо указать адрес структуры net_driver в поле drv_ops структуры net_device.

#### Описатеть сетевого пакета
Сетевой пакет описывается с помощью структуры 'struct sk_buff'.

#### Отправка
После отправки (или обработки) сетевого пакета его необходимо освободить с помощью функции skb_free().

#### Прием
После получения сетевого пакета его необходимо описать с помошью структуры sk_buff и затем передать в сетевой стек с помощью функции netif_rx()


