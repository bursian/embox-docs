# Поддержка С++

В Embox добавлена поддержка С++, которая предоставляет как полноценную поддержку C++ приложений с обработкой исключений, так и урезанную версию без исключений.

Для того чтобы включить поддержку С++ необходимо внести изменения в conf/mods.config и conf/build.conf.
Ниже приводится описание модулей и флагов, которые можно изменять.

## Базовая поддержка

### Включение базовой поддержки C++ - конструкторы и деструкторы.

```
    include embox.lib.cxx.ConstructionSingleApp
    include embox.lib.cxx.DestructionStatic(table_size=256)
```

Включает вызов конструкторов и деструктуров для C++ приложения.

### Стандартная библиотека - \<cmath\> и другие

Инклуды для стандартной библиотеки включаются и доступны отовсюду при сборке любого С++ приложения. Поэтому требуется только включение реализации стандартой библиотеки:

```
	include embox.compat.libc.all
```

### Библиотека libsupc++ - exception, new, typeinfo

Для управления объектами и исключениями в C++ требуется реализация библиотеки libsupc++. Она имеет три реализации:

* `include third_party.gcc.libsupcxx`
   
	В этом случае будет скомпилирована из исходников GCC. Предоставляет обработку исключений.
	Применяется для x86, где не используется кросс-компилятор.

* `third_party.lib.libsupcxx_toolchain`

	Библиотека берется из кросс-компилятора. Этот предпочтительный вариант, если нужны исключения.

* `include embox.lib.cxx.libsupcxx_standalone`

	Самый минимальный вариант реализации libsupc++, без исключений. Может пригодиться для платформ с ограниченными ресурсами, такими как STM32

### Библиотека libgcc - stack unwinding

* `include third_party.gcc.libgcc`
   
	В этом случае будет скомпилирована из исходников GCC.

* `third_party.lib.libgcc_toolchain`

	Библиотека берется из кросс-компилятора. Этот предпочтительный вариант, если нужны исключения.

### Флаги компиляции

	Внение флагов в conf/build.conf:

* Вариант без исключений:

```
CXXFLAGS += -fno-rtti
CXXFLAGS += -fno-exceptions
```

* Вариант с ислючениями:

	Дополнительных флагов не требуется.

## Сторонние библиотеки

### STLport - реализация STL

Включается так:

```
include third_party.STLport.libstlportg
```

Можно включить демонстрационный пример:
```
include third_party.STLport.stl_demo.stl_demo_sort1
```

Библиотека собирается как с поддержкой исключений, так и без.

## Примеры.

Включений базовой поддержки C++ и STL можно посмотреть в `templates/arm/c++_demo/`
